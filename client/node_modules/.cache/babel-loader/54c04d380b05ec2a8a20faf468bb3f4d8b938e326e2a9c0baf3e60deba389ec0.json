{"ast":null,"code":"import axios from 'axios';\nimport { setAlert } from './alert';\nimport { GET_PROFILE, GET_PROFILES, UPDATE_PROFILE, PROFILE_ERROR, CLEAR_PROFILE, ACCOUNT_DELETED } from './types';\n\n// Get current users profile\nexport const getCurrentProfile = () => async dispatch => {\n  try {\n    const res = await axios.get('api/profile/me');\n    dispatch({\n      type: GET_PROFILE,\n      payload: res.data\n    });\n  } catch (error) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: error.response,\n        status: error.response.status\n      }\n    });\n  }\n};\n\n// Get all profiles\nexport const getProfiles = () => async dispatch => {\n  try {\n    const res = await axios.get('api/profile');\n    dispatch({\n      type: GET_PROFILES,\n      payload: res.data\n    });\n  } catch (error) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: 'Failed to load profiles',\n        status: error.response.status\n      }\n    });\n  }\n};\n\n// Create or Update profile\nexport const createProfile = (formData, history, edit = false) => async dispatch => {\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const res = await axios.post('/api/profile', formData, config);\n    dispatch({\n      type: GET_PROFILE,\n      payload: res.data\n    });\n    dispatch(setAlert(edit ? 'Profile Updated' : 'Profile Created', 'success'));\n    if (!edit) {\n      history.navigate('/dashboard');\n    }\n  } catch (error) {\n    const errors = error.response.data.errors;\n    if (errors) {\n      errors.forEach(err => dispatch(setAlert(err.msg, 'danger')));\n    }\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: 'Profile could not be saved',\n        status: error.response.status\n      }\n    });\n  }\n};\n\n// Add Experience\nexport const addExperience = (formData, navigate) => async dispatch => {\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const res = await axios.put('/api/profile/experience', formData, config);\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data\n    });\n    dispatch(setAlert('Experience Added', 'success'));\n    navigate('/dashboard');\n  } catch (error) {\n    const errors = error.response.data.errors;\n    if (errors) {\n      errors.forEach(err => dispatch(setAlert(err.msg, 'danger')));\n    }\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: 'Profile could not be saved',\n        status: error.response.status\n      }\n    });\n  }\n};\n\n// Add Education\nexport const addEducation = (formData, navigate) => async dispatch => {\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const res = await axios.put('/api/profile/education', formData, config);\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data\n    });\n    dispatch(setAlert('Education Added', 'success'));\n    navigate('/dashboard');\n  } catch (error) {\n    const errors = error.response.data.errors;\n    if (errors) {\n      errors.forEach(err => dispatch(setAlert(err.msg, 'danger')));\n    }\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: 'Profile could not be saved',\n        status: error.response.status\n      }\n    });\n  }\n};\n\n// Delete Experience\nexport const deleteExperience = id => async dispatch => {\n  try {\n    const res = await axios.delete(`/api/profile/experience/${id}`);\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data\n    });\n    dispatch(setAlert('Experience Removed', 'success'));\n  } catch (error) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: 'Experience could not be deleted',\n        status: error.response.status\n      }\n    });\n  }\n};\n\n// Delete Education \nexport const deleteEducation = id => async dispatch => {\n  try {\n    const res = await axios.delete(`/api/profile/education/${id}`);\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data\n    });\n    dispatch(setAlert('Education Removed', 'success'));\n  } catch (error) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: 'Education could not be deleted',\n        status: error.response.status\n      }\n    });\n  }\n};\n\n// Delete Account & Profile\nexport const deleteAccount = () => async dispatch => {\n  if (window.confirm('Are you sure? This cannot be undone')) {\n    try {\n      await axios.delete('/api/profile');\n      dispatch({\n        type: CLEAR_PROFILE\n      });\n      dispatch({\n        type: ACCOUNT_DELETED\n      });\n      dispatch(setAlert('YOUR account has been permanantly deleted'));\n    } catch (error) {\n      dispatch({\n        type: PROFILE_ERROR,\n        payload: {\n          msg: 'Your account could not be deleted',\n          status: error.response.status\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","setAlert","GET_PROFILE","GET_PROFILES","UPDATE_PROFILE","PROFILE_ERROR","CLEAR_PROFILE","ACCOUNT_DELETED","getCurrentProfile","dispatch","res","get","type","payload","data","error","msg","response","status","getProfiles","createProfile","formData","history","edit","config","headers","post","navigate","errors","forEach","err","addExperience","put","addEducation","deleteExperience","id","delete","deleteEducation","deleteAccount","window","confirm"],"sources":["/Users/sudhin.justin/source/Projects/devconnector/client/src/actions/profile.js"],"sourcesContent":["import axios from 'axios';\nimport { setAlert } from './alert';\nimport {\n  GET_PROFILE,\n  GET_PROFILES,\n  UPDATE_PROFILE,\n  PROFILE_ERROR,\n  CLEAR_PROFILE,\n  ACCOUNT_DELETED,\n} from './types';\n\n// Get current users profile\nexport const getCurrentProfile = () => async dispatch => {\n  try {\n    const res = await axios.get('api/profile/me');\n\n    dispatch({\n      type: GET_PROFILE,\n      payload: res.data,\n    })\n  } catch (error) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { \n        msg: error.response, \n        status: error.response.status\n      }\n    })\n  }\n}\n\n// Get all profiles\nexport const getProfiles = () => async dispatch => {\n  try {\n    const res = await axios.get('api/profile');\n\n    dispatch({\n      type: GET_PROFILES,\n      payload: res.data,\n    })\n  } catch (error) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { \n        msg: 'Failed to load profiles', \n        status: error.response.status\n      }\n    })\n  }\n}\n\n// Create or Update profile\nexport const createProfile = (formData, history, edit = false) => async dispatch => {\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }\n\n    const res = await axios.post('/api/profile', formData, config);\n\n    dispatch({\n      type: GET_PROFILE,\n      payload: res.data,\n    });\n\n    dispatch(setAlert(edit ? 'Profile Updated' : 'Profile Created', 'success'));\n\n    if(!edit) {\n      history.navigate('/dashboard');\n    }\n  } catch (error) {\n    const errors = error.response.data.errors;\n\n    if(errors) {\n      errors.forEach(err => dispatch(setAlert(err.msg, 'danger')))\n    }\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: 'Profile could not be saved',\n        status: error.response.status,\n      }\n    }); \n  }\n}\n\n// Add Experience\nexport const addExperience = (formData, navigate) => async dispatch => {\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }\n\n    const res = await axios.put('/api/profile/experience', formData, config);\n\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data,\n    });\n\n    dispatch(setAlert('Experience Added', 'success'));\n\n    navigate('/dashboard');\n  } catch (error) {\n    const errors = error.response.data.errors;\n\n    if(errors) {\n      errors.forEach(err => dispatch(setAlert(err.msg, 'danger')))\n    }\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: 'Profile could not be saved',\n        status: error.response.status,\n      }\n    }); \n  }  \n}\n\n// Add Education\nexport const addEducation = (formData, navigate) => async dispatch => {\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }\n\n    const res = await axios.put('/api/profile/education', formData, config);\n\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data,\n    });\n\n    dispatch(setAlert('Education Added', 'success'));\n    \n    navigate('/dashboard');\n\n  } catch (error) {\n    const errors = error.response.data.errors;\n\n    if(errors) {\n      errors.forEach(err => dispatch(setAlert(err.msg, 'danger')))\n    }\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: 'Profile could not be saved',\n        status: error.response.status,\n      }\n    }); \n  }  \n}\n\n// Delete Experience\nexport const deleteExperience = (id) => async dispatch => {\n  try {\n    const res = await axios.delete(`/api/profile/experience/${id}`);\n\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data,\n    });\n\n    dispatch(setAlert('Experience Removed', 'success'));\n  } catch (error) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: 'Experience could not be deleted',\n        status: error.response.status,\n      }\n    });\n  }\n}\n\n// Delete Education \nexport const deleteEducation = (id) => async dispatch => {\n  try {\n    const res = await axios.delete(`/api/profile/education/${id}`);\n\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data,\n    });\n\n    dispatch(setAlert('Education Removed', 'success'));\n  } catch (error) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: 'Education could not be deleted',\n        status: error.response.status,\n      }\n    });\n  }\n}\n\n// Delete Account & Profile\nexport const deleteAccount = () => async dispatch => {\n  if(window.confirm('Are you sure? This cannot be undone')) {\n    try {\n      await axios.delete('/api/profile');\n\n      dispatch({ \n        type: CLEAR_PROFILE,\n      });\n  \n      dispatch({\n        type: ACCOUNT_DELETED,\n      });\n  \n      dispatch(setAlert('YOUR account has been permanantly deleted'));\n    } catch (error) {\n      dispatch({\n        type: PROFILE_ERROR,\n        payload: {\n          msg: 'Your account could not be deleted',\n          status: error.response.status,\n        }\n      });\n    }\n  }  \n}\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}